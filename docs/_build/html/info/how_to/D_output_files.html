
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Output files &#8212; OceanTracker Beta 0.4 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Running using param. dict." href="E_run_using_parameter_dictionaries.html" />
    <link rel="prev" title="Release Groups" href="C_release_groups.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../../index.html">
    <img class="logo" src="../../_static/ocean_tracker.png" alt="Logo"/>
    
  </a>
</p>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=oceantracker&repo=oceantracker&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gallery.html">Gallery</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../users_guide.html">Users guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../installing.html">Installing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how_to.html">How to notebooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../running_ocean_tracker.html">Running OceanTracker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../parameter_ref/parameter_ref_toc.html">Parameter details</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Output files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../change_log.html">Change log</a></li>
<li class="toctree-l2"><a class="reference internal" href="../future_dev.html">Future development</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../users_guide.html">Users guide</a><ul>
  <li><a href="../how_to.html">How to notebooks</a><ul>
      <li>Previous: <a href="C_release_groups.html" title="previous chapter">Release Groups</a></li>
      <li>Next: <a href="E_run_using_parameter_dictionaries.html" title="next chapter">Running using param. dict.</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="output-files">
<h1>Output files<a class="headerlink" href="#output-files" title="Permalink to this heading">¶</a></h1>
<p>[This note-book is in oceantracker/tutorials_how_to/]</p>
<p>After running OceanTacker, output files are in the files are the folder
given by parameters ./“root_output_dir”/“output_file_base”</p>
<p>The main files are:</p>
<ul class="simple">
<li><p>**users_params_*.json**, a copy of the parameters as supplied by the
user, useful in debugging or re-running.</p></li>
<li><p>**_runInfo.json** holds</p>
<ul>
<li><p>file names of case files</p></li>
<li><p>information on computer used</p></li>
<li><p>code version, including git commit ID to enable rerunning with
exactly the same version</p></li>
</ul>
</li>
<li><p>**_caseInfo.json** files, have all the output files for each
parallel case run (only 1 case in examples give so far), plus
information about the run and data useful in plotting. Eg.</p>
<ul>
<li><p>full set of working parameters with defaults used</p></li>
<li><p>timings of parts of code</p></li>
<li><p>output_files, the names of all output files generated by the run
separated by type.</p></li>
<li><p>information about the hindcast, eg start date, end date, time
step, …</p></li>
<li><p>basic information from each class used in the computational
pipeline</p></li>
</ul>
</li>
<li><p>**_caseLog_log.txt** has a copy of what appeared on the screen
during the run</p></li>
<li><p>**_tracks.nc** holds the particle tracks in a netcdf file, see
below for code example on reading the tracks</p></li>
<li><p>**_grid_outline.json** are the boundaries of hydrodynamic model’s
domain and islands, useful in plotting</p></li>
<li><p>**_grid.nc** a netcdf of the hydo-model’s grid and other
information, useful in plotting and analysis</p></li>
<li><p>**_events.nc** a netcdf output from events classes, which only
writes output when events occur, eg. a particle entering or exiting
given polygons.</p></li>
</ul>
<p>Time variables in these file are in seconds since 1970-01-01</p>
<p>Below list the files after running the minimal example.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># show a list of output files after running  minimal_example</span>
<span class="kn">import</span> <span class="nn">glob</span>
<span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;output/minimal_example/*&#39;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<pre class="literal-block">output/minimal_exampleminimal_example_caseInfo.json
output/minimal_exampleminimal_example_caseLog_log.txt
output/minimal_exampleminimal_example_grid.nc
output/minimal_exampleminimal_example_grid_outline.json
output/minimal_exampleminimal_example_log.txt
output/minimal_exampleminimal_example_raw_user_params.json
output/minimal_exampleminimal_example_runInfo.json
output/minimal_exampleminimal_example_tracks_compact.nc
output/minimal_exampleusers_params_minimal_example.json</pre>
<section id="reading-particle-tracks">
<h2>Reading particle tracks<a class="headerlink" href="#reading-particle-tracks" title="Permalink to this heading">¶</a></h2>
<p>The below shows how to read the netcdf particle track output file into a
python dictionary. The track file has a record of each of the particle
properties, plus other useful information. The netcdf tracks file has a
compact format, the below code reads this file into rectangular numpy [
time, particle] arrays. Key variables are :</p>
<ul>
<li><p>tracks[‘x’]- the particle locations as a rectangular array of
position vectors. With dimensions [ time, particle, vector
component]. So that the 2D location is</p>
<p><code class="docutils literal notranslate"><span class="pre">x,</span> <span class="pre">y</span> <span class="pre">=</span> <span class="pre">tracks['x'][:,:,0],</span> <span class="pre">tracks['x'][:,:,1]</span></code></p>
</li>
</ul>
<p>and for a 3D model the vertical position is z= tracks[‘x’][:,:,2]</p>
<ul class="simple">
<li><p>tracks[‘time’] - array of time in seconds since 1970-1-1</p></li>
<li><p>tracks[‘date’] - array of dates as numpy datetime64[s]</p></li>
<li><p>tracks[‘status’] - the numerical codes of particle status, eg moving,
dead etc as [ time, particle] array. The values of these status codes
are also in the dictionary, eg tracks[‘status_stranded_by_tide’] = 3.</p></li>
<li><p>tracks[‘age’] - time series of each particles age, ie time since
release in seconds.</p></li>
<li><p>tracks[‘IDrelease_group’] and tracks[‘IDpulse’] - id’s of which
release group particles where released from and which pulse within
that group. These are based indices and arrays of size particle, the
total number of particles released during the run.</p></li>
</ul>
<p>The index within the “particle” dimension, is the individual particleID,
ordered from first to last release across the entire model run.</p>
<p>Note: For very large track files reading may fail, eg where variables
exceed the 2-4Gb numpy array limit in Windows. To avoid this rerun using
the tracks_writer setting “time_steps_per_per_file” to split the track
file into files with given number of time steps. Key variables in the
dictionary are:</p>
<p>The below also shows how read the hydrodynamic grid.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># example of reading tracks file</span>

<span class="c1"># read netcdf into dictionary</span>
<span class="kn">from</span> <span class="nn">oceantracker.post_processing.read_output_files</span> <span class="kn">import</span> <span class="n">read_ncdf_output_files</span>

<span class="n">tracks</span> <span class="o">=</span><span class="n">read_ncdf_output_files</span><span class="o">.</span><span class="n">read_particle_tracks_file</span><span class="p">(</span><span class="s1">&#39;output/minimal_example\minimal_example_tracks_compact.nc&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Track data&#39;</span><span class="p">,</span> <span class="n">tracks</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

<span class="c1"># read the hydro-dynamic grid file, useful in plotting</span>
<span class="n">grid</span> <span class="o">=</span><span class="n">read_ncdf_output_files</span><span class="o">.</span><span class="n">read_grid_file</span><span class="p">(</span><span class="s1">&#39;output/minimal_example\minimal_example_grid.nc&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Grid data&#39;</span><span class="p">,</span><span class="n">grid</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Track</span> <span class="n">data</span> <span class="n">dict_keys</span><span class="p">([</span><span class="s1">&#39;file_created&#39;</span><span class="p">,</span> <span class="s1">&#39;total_num_particles_released&#39;</span><span class="p">,</span> <span class="s1">&#39;time_steps_written&#39;</span><span class="p">,</span> <span class="s1">&#39;status_unknown&#39;</span><span class="p">,</span> <span class="s1">&#39;status_bad_cord&#39;</span><span class="p">,</span> <span class="s1">&#39;status_cell_search_failed&#39;</span><span class="p">,</span> <span class="s1">&#39;status_notReleased&#39;</span><span class="p">,</span> <span class="s1">&#39;status_dead&#39;</span><span class="p">,</span> <span class="s1">&#39;status_outside_open_boundary&#39;</span><span class="p">,</span> <span class="s1">&#39;status_frozen&#39;</span><span class="p">,</span> <span class="s1">&#39;status_stranded_by_tide&#39;</span><span class="p">,</span> <span class="s1">&#39;status_on_bottom&#39;</span><span class="p">,</span> <span class="s1">&#39;status_moving&#39;</span><span class="p">,</span> <span class="s1">&#39;release_groupID_my_release_point&#39;</span><span class="p">,</span> <span class="s1">&#39;dimensions&#39;</span><span class="p">,</span> <span class="s1">&#39;status&#39;</span><span class="p">,</span> <span class="s1">&#39;tide&#39;</span><span class="p">,</span> <span class="s1">&#39;particles_written_per_time_step&#39;</span><span class="p">,</span> <span class="s1">&#39;IDpulse&#39;</span><span class="p">,</span> <span class="s1">&#39;friction_velocity&#39;</span><span class="p">,</span> <span class="s1">&#39;is_polygon_release&#39;</span><span class="p">,</span> <span class="s1">&#39;dry_cell_index&#39;</span><span class="p">,</span> <span class="s1">&#39;IDrelease_group&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="s1">&#39;time_step_range&#39;</span><span class="p">,</span> <span class="s1">&#39;particle_ID&#39;</span><span class="p">,</span> <span class="s1">&#39;time_released&#39;</span><span class="p">,</span> <span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="s1">&#39;user_release_groupID&#39;</span><span class="p">,</span> <span class="s1">&#39;num_part_released_so_far&#39;</span><span class="p">,</span> <span class="s1">&#39;x0&#39;</span><span class="p">,</span> <span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;x_last_good&#39;</span><span class="p">,</span> <span class="s1">&#39;number_of_release_points&#39;</span><span class="p">,</span> <span class="s1">&#39;water_depth&#39;</span><span class="p">,</span> <span class="s1">&#39;release_points&#39;</span><span class="p">,</span> <span class="s1">&#39;release_groupID&#39;</span><span class="p">,</span> <span class="s1">&#39;release_locations&#39;</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">])</span>
<span class="n">Grid</span> <span class="n">data</span> <span class="n">dict_keys</span><span class="p">([</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;triangles&#39;</span><span class="p">,</span> <span class="s1">&#39;triangle_area&#39;</span><span class="p">,</span> <span class="s1">&#39;adjacency&#39;</span><span class="p">,</span> <span class="s1">&#39;node_type&#39;</span><span class="p">,</span> <span class="s1">&#39;is_boundary_triangle&#39;</span><span class="p">,</span> <span class="s1">&#39;water_depth&#39;</span><span class="p">])</span>
</pre></div>
</div>
</section>
<section id="load-data-method">
<h2>Load data method<a class="headerlink" href="#load-data-method" title="Permalink to this heading">¶</a></h2>
<p>Load data method, reads the netcdf, grid, and other information needed
to plot into a dictionary. This is the recommended method for reading
track output. It uses the case_info file to locate all these files
associated with the case run.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># load netcdf with grid and other useful info for plotting</span>
<span class="kn">from</span> <span class="nn">oceantracker.post_processing.read_output_files</span> <span class="kn">import</span> <span class="n">load_output_files</span>

<span class="n">tracks_plot</span> <span class="o">=</span><span class="n">load_output_files</span><span class="o">.</span><span class="n">load_track_data</span><span class="p">(</span><span class="s1">&#39;output/minimal_example\minimal_example_caseInfo.json&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;tracks_plot data&#39;</span><span class="p">,</span> <span class="n">tracks_plot</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tracks_plot</span> <span class="n">data</span> <span class="n">dict_keys</span><span class="p">([</span><span class="s1">&#39;file_created&#39;</span><span class="p">,</span> <span class="s1">&#39;total_num_particles_released&#39;</span><span class="p">,</span> <span class="s1">&#39;time_steps_written&#39;</span><span class="p">,</span> <span class="s1">&#39;status_unknown&#39;</span><span class="p">,</span> <span class="s1">&#39;status_bad_cord&#39;</span><span class="p">,</span> <span class="s1">&#39;status_cell_search_failed&#39;</span><span class="p">,</span> <span class="s1">&#39;status_notReleased&#39;</span><span class="p">,</span> <span class="s1">&#39;status_dead&#39;</span><span class="p">,</span> <span class="s1">&#39;status_outside_open_boundary&#39;</span><span class="p">,</span> <span class="s1">&#39;status_frozen&#39;</span><span class="p">,</span> <span class="s1">&#39;status_stranded_by_tide&#39;</span><span class="p">,</span> <span class="s1">&#39;status_on_bottom&#39;</span><span class="p">,</span> <span class="s1">&#39;status_moving&#39;</span><span class="p">,</span> <span class="s1">&#39;release_groupID_my_release_point&#39;</span><span class="p">,</span> <span class="s1">&#39;dimensions&#39;</span><span class="p">,</span> <span class="s1">&#39;status&#39;</span><span class="p">,</span> <span class="s1">&#39;tide&#39;</span><span class="p">,</span> <span class="s1">&#39;particles_written_per_time_step&#39;</span><span class="p">,</span> <span class="s1">&#39;IDpulse&#39;</span><span class="p">,</span> <span class="s1">&#39;friction_velocity&#39;</span><span class="p">,</span> <span class="s1">&#39;is_polygon_release&#39;</span><span class="p">,</span> <span class="s1">&#39;dry_cell_index&#39;</span><span class="p">,</span> <span class="s1">&#39;IDrelease_group&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="s1">&#39;time_step_range&#39;</span><span class="p">,</span> <span class="s1">&#39;particle_ID&#39;</span><span class="p">,</span> <span class="s1">&#39;time_released&#39;</span><span class="p">,</span> <span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="s1">&#39;user_release_groupID&#39;</span><span class="p">,</span> <span class="s1">&#39;num_part_released_so_far&#39;</span><span class="p">,</span> <span class="s1">&#39;x0&#39;</span><span class="p">,</span> <span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;x_last_good&#39;</span><span class="p">,</span> <span class="s1">&#39;number_of_release_points&#39;</span><span class="p">,</span> <span class="s1">&#39;water_depth&#39;</span><span class="p">,</span> <span class="s1">&#39;release_points&#39;</span><span class="p">,</span> <span class="s1">&#39;release_groupID&#39;</span><span class="p">,</span> <span class="s1">&#39;release_locations&#39;</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">,</span> <span class="s1">&#39;grid&#39;</span><span class="p">,</span> <span class="s1">&#39;particle_status_flags&#39;</span><span class="p">,</span> <span class="s1">&#39;particle_release_groups&#39;</span><span class="p">,</span> <span class="s1">&#39;full_case_params&#39;</span><span class="p">,</span> <span class="s1">&#39;axis_lim&#39;</span><span class="p">])</span>
</pre></div>
</div>
</section>
</section>


          </div>
              <div class="related bottom">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="C_release_groups.html" title="Previous document">Release Groups</a>
        </li>
        <li>
          <a href="E_run_using_parameter_dictionaries.html" title="Next document">Running using param. dict.</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2022, R. Vennell.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.0.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/info/how_to/D_output_files.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>